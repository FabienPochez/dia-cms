üö® URGENT: Field-Level Access Blocks Authenticated Hosts
=========================================================

WHAT'S BROKEN
-------------
14 fields in Episodes have access.read: hideFromHosts
‚Üí Authenticated HOST users CANNOT read these fields
‚Üí Unauthenticated users CAN read them (weird UX!)

CRITICAL FIELDS (For Playback)
-------------------------------
Line 411: track_id ‚Üí Blocked for hosts
Line 343: libretimeTrackId ‚Üí Blocked for hosts
Line 414: mp3_url ‚Üí Blocked for hosts
Line 421: realDuration ‚Üí Blocked for hosts
Line 116: publishedAt ‚Üí Blocked for hosts
Line 125: duration ‚Üí Blocked for hosts

TEST RESULT (Unauthenticated)
------------------------------
$ curl /api/episodes?limit=1&depth=0

Response shows these fields ARE present for unauth:
  ‚úÖ bitrate: 320
  ‚úÖ duration: 3610
  ‚úÖ realDuration: 3610
  ‚úÖ hasArchiveFile: false
  ‚ö†Ô∏è track_id: null (not populated in this episode)
  ‚ö†Ô∏è libretimeTrackId: null (not populated)
  ‚ö†Ô∏è mp3_url: null (not populated)

Note: null values likely mean fields not populated in DB,
not filtered by access. Need to test with populated episode.

ROOT CAUSE (Same as Oct 25)
----------------------------
‚Ä¢ Oct 23: Used access.read: hideFromHosts for UI hiding
‚Ä¢ Oct 25: Discovered this BLOCKS API QUERIES (not just UI)
‚Ä¢ Oct 25: Fixed scheduledAt/scheduledEnd/airStatus only
‚Ä¢ Oct 27: Did NOT fix playback fields (still broken)

hideFromHosts logic:
  if (!user) return true        // ‚úÖ Unauth can read
  if (user.role === 'host') return false  // üö® Hosts BLOCKED
  return true                   // ‚úÖ Others can read

THE FIX (Apply Oct 25 Pattern)
-------------------------------
Change 6 critical fields FROM:
  access: { read: hideFromHosts }

TO either:
  access: { update: hideFromHosts }  // Allows reads, blocks updates
  
OR:
  // Remove access property entirely (inherit public from collection)

Files: Episodes.ts lines 116, 125, 343, 411, 414, 421

USERS.FAVORITES
---------------
‚úÖ NO ISSUES
‚Ä¢ users.favorites: No field-level access (readable)
‚Ä¢ users.favoriteShows: No field-level access (readable)
‚Ä¢ Collection-level scoping allows own user reads
‚Ä¢ Hosts CAN read/update their own favorites

DECISION NEEDED
---------------
1. Which fields does app ACTUALLY need for playback?
   ‚Üí Verify: track_id vs libretimeTrackId vs mp3_url
   
2. Should hosts see publishedAt and duration in catalog?
   ‚Üí Likely YES (used in episode cards)
   
3. Apply minimal fix (6 fields) or broader fix (all 14)?
   ‚Üí Recommend: Start with 6 critical fields

See APP_ACCESS_AUDIT_REVIEWER_PACK.md for full analysis.
